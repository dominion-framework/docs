<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dominion - Node.js framework for creating REST APIs</title>
    <meta content="width=device-width, initial-scale=1.0,minimum-scale=1.0,user-scalable=yes" name="viewport" />
    <link href="/assets/style.css" type="text/css" rel="stylesheet" />
    <script src="/assets/clipboard.min.js" async></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-97343130-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-97343130-2');
    </script>
</head>
<body>
<div class="doc-page">
    <div class="toggle menu-toggle"></div>
    <nav class="menu toc-menu">
        <ul>
            <li class="menu-item logo">
                <a class="link" href="/"><img src="/assets/logo.svg" /></a>
            </li>
            <li class="menu-item">
                <a class="link" href="/quick-start">Quick start</a>
            </li>
            <li class="menu-item">
                <a class="link active" href="/components">Components</a>
            </li>
            <li class="menu-item">
                <a class="link" href="#api-request-lifecycle">API Request Lifecycle</a>
            </li>
            <li class="menu-item">
                <a class="link" href="#controller">Controller</a>
            </li>
            <li class="menu-item">
                <a class="link" href="#models">Models</a>
            </li>
            <li class="menu-item">
                <a class="link" href="#repositories">Repositories</a>
            </li>
            <li class="menu-item">
                <a class="link" href="#interceptors">Interceptors</a>
            </li>
            <li class="menu-item">
                <a class="link" href="/annotations">Annotations</a>
                <ul class="submenu">
                    <li class="menu-item"><a class="link" href="#available-settings">@path</a>
                    </li>
                    <li class="menu-item"><a class="link" href="#plugins">@summary</a>
                    </li>
                    <li class="menu-item"><a class="link" href="#installing-markdown-plugins">@description</a>
                    </li>
                    <li class="menu-item"><a class="link" href="#bundled-plugins">@model</a>
                    </li>
                    <li class="menu-item"><a class="link" href="#bundled-plugins">@deprecated</a>
                    </li>
                </ul>
            </li>
        </ul>
    </nav>
    <div class="markdown-body"><h1>Components</h1>
<p>You can take “components” as 1:1 representation of restfull (or business) domains.
It’s useful to organize components having each in separate folder.
Lets take <code>Users</code> model for example. Recommended file organization will be:</p>
<pre class="hljs"><code class="highlight" id="_33o6">| - components/
| | - users/             &lt;-- `Users` component 
| | | - index.js
| | | - controller.js
| | | - factory.js
| | | - repository.js
| | - products/
| - index.js
| - package.json
| - package-lock.json
</code></pre>
<h2>Creating component from cli</h2>
<pre class="hljs"><button data-clipboard-target="#_2jap" title="Copy to clipboard"><svg viewBox="-40 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m271 512h-191c-44.113281 0-80-35.886719-80-80v-271c0-44.113281 35.886719-80 80-80h191c44.113281 0 80 35.886719 80 80v271c0 44.113281-35.886719 80-80 80zm-191-391c-22.054688 0-40 17.945312-40 40v271c0 22.054688 17.945312 40 40 40h191c22.054688 0 40-17.945312 40-40v-271c0-22.054688-17.945312-40-40-40zm351 261v-302c0-44.113281-35.886719-80-80-80h-222c-11.046875 0-20 8.953125-20 20s8.953125 20 20 20h222c22.054688 0 40 17.945312 40 40v302c0 11.046875 8.953125 20 20 20s20-8.953125 20-20zm0 0"/></svg></button><code class="highlight" id="_2jap">npx dominion create users
</code></pre>
<p>Third command <code>npx dominion create hello</code> is creating project scaffold.
Actually, it is creating scaffold for a single component. You can read
more about it on page <a href="/components">Components</a>.</p>
<h2>Component declaration file</h2>
<p>Component dependencies are declared in <code>index.js</code> file:</p>
<pre class="hljs"><button data-clipboard-target="#_3agm" title="Copy to clipboard"><svg viewBox="-40 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m271 512h-191c-44.113281 0-80-35.886719-80-80v-271c0-44.113281 35.886719-80 80-80h191c44.113281 0 80 35.886719 80 80v271c0 44.113281-35.886719 80-80 80zm-191-391c-22.054688 0-40 17.945312-40 40v271c0 22.054688 17.945312 40 40 40h191c22.054688 0 40-17.945312 40-40v-271c0-22.054688-17.945312-40-40-40zm351 261v-302c0-44.113281-35.886719-80-80-80h-222c-11.046875 0-20 8.953125-20 20s8.953125 20 20 20h222c22.054688 0 40 17.945312 40 40v302c0 11.046875 8.953125 20 20 20s20-8.953125 20-20zm0 0"/></svg></button><code class="highlight" id="_3agm"><span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">factories</span>: [
        __dirname + <span class="hljs-string">'/factory'</span>,      <span class="hljs-comment">// &lt;-- reference to factory.js</span>
    ],
    <span class="hljs-attr">controllers</span>: [
        __dirname + <span class="hljs-string">'/controller'</span>,   <span class="hljs-comment">// &lt;-- reference to controller.js</span>
    ],
    <span class="hljs-attr">requestInterceptors</span>: [ ],        <span class="hljs-comment">// &lt;-- list of references to request interceptors</span>

    responseInterceptors: [ ],       <span class="hljs-comment">// &lt;-- list of references to response interceptors</span>

    bootstrap: [ ]                   <span class="hljs-comment">// &lt;-- list of references to files that will run on startup</span>
};
</code></pre>
<p>This declarations is used only for requiring components on the fly independent from
order of requires in file.</p>
<p>There are 3 default entities:</p>
<ol>
<li>Controllers</li>
<li>Factories</li>
<li>Repositories</li>
</ol>
<p><code>Controller</code> is a place where you define API’s endpoints, basically mappings
between URL’s and actions you need to produce response.</p>
<p><code>Factories</code> is where you describe model structure and its methods. Optionally factories
may be linked to a repository.</p>
<p><code>Repository</code> is playing role of ORM (Object-relational mapping) with external data storage.
By default framework uses MySQL, but should work with any DB that has compatible SQL dialect.
Alternative, repository prototype may be redefined to work with any type of
storage (NoSQL, cloud storage, flat file, etc).</p>
<p>Commonly you’ll need one set of controller/factory/repository in a component,
but it’s possible to have multiple ones if needed.</p>
</div>
</div>
</body>
</html>
