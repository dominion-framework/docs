<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Properties — Dominion Node.js framework for RESTful APIs</title>
    <meta name="description" content="Dominion is declarative Promise based Node.js framework for RESTful API" />
    <meta content="width=device-width, initial-scale=1.0,minimum-scale=1.0,user-scalable=yes" name="viewport" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <link rel="manifest" href="/assets/site.webmanifest">
    <link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <link href="/assets/style.css" type="text/css" rel="stylesheet" />
    <script src="/assets/clipboard.min.js" async></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-97343130-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-97343130-2');
    </script>
</head>
<body>
<div class="doc-page">
    <nav class="menu toc-menu">
        <button class="menu-toggle-button" onclick="document.querySelector('.toc-menu div.collapsible').classList.toggle('open')">
            <div class="menu-toggle"></div>
        </button>
        <div class="menu-item logo">
            <a class="link" href="/"><img src="/assets/logo.svg" /></a>
        </div>
        <div class="collapsible">
            <div class="links">
                <a href="https://www.npmjs.com/package/@dominion-framework/dominion" style="width: 32px;" target="_blank">
                    <svg viewBox="0 0 256 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMinYMin meet"><path d="M0 0v85.498h71.166V99.83H128V85.498h128V0H0z" fill="#000"/><path d="M42.502 14.332h-28.17v56.834h28.17V28.664h14.332v42.502h14.332V14.332H42.502zM85.498 14.332v71.166h28.664V71.166h28.17V14.332H85.498zM128 56.834h-13.838v-28.17H128v28.17zM184.834 14.332h-28.17v56.834h28.17V28.664h14.332v42.502h14.332V28.664h14.332v42.502h14.332V14.332h-57.328z" fill="#FFF"/></svg>
                </a>
                <a href="https://gitter.im/dominion-framework/community" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50"><path d="M10 2a1 1 0 0 0-1 1v27a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1h-4zm9 7a1 1 0 0 0-1 1v37a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1h-4zm9 0a1 1 0 0 0-1 1v37a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1h-4zm9 0a1 1 0 0 0-1 1v20a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1V10a1 1 0 0 0-1-1h-4z"/></svg>
                </a>
                <a href="https://github.com/dominion-framework/dominion" target="_blank">
                    <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m256 0c-140.609375 0-256 115.390625-256 256 0 119.988281 84.195312 228.984375 196 256v-84.695312c-11.078125 2.425781-21.273438 2.496093-32.550781-.828126-15.128907-4.464843-27.421875-14.542968-36.546875-29.910156-5.816406-9.8125-16.125-20.453125-26.878906-19.671875l-2.636719-29.882812c23.253906-1.992188 43.371093 14.167969 55.3125 34.230469 5.304687 8.921874 11.410156 14.152343 19.246093 16.464843 7.574219 2.230469 15.707032 1.160157 25.183594-2.1875 2.378906-18.972656 11.070313-26.074219 17.636719-36.074219v-.015624c-66.679687-9.945313-93.253906-45.320313-103.800781-73.242188-13.976563-37.074219-6.476563-83.390625 18.238281-112.660156.480469-.570313 1.347656-2.0625 1.011719-3.105469-11.332032-34.230469 2.476562-62.546875 2.984375-65.550781 13.078125 3.867187 15.203125-3.890625 56.808593 21.386718l7.191407 4.320313c3.007812 1.792969 2.0625.769531 5.070312.542969 17.371094-4.71875 35.683594-7.324219 53.726563-7.558594 18.179687.234375 36.375 2.839844 54.464844 7.75l2.328124.234375c-.203124-.03125.632813-.148437 2.035157-.984375 51.972656-31.480469 50.105469-21.191406 64.042969-25.722656.503906 3.007812 14.128906 31.785156 2.917968 65.582031-1.511718 4.65625 45.058594 47.300781 19.246094 115.753906-10.546875 27.933594-37.117188 63.308594-103.796875 73.253907v.015624c8.546875 13.027344 18.816406 19.957032 18.761719 46.832032v105.722656c111.808594-27.015625 196-136.011719 196-256 .003906-140.609375-115.386719-256-255.996094-256zm0 0"/></svg>
                </a>
            </div>
            <ul>
                <li class="menu-item">
                    <a class="link" href="/quick-start/">Quick Start</a>
                </li>
                <li class="menu-item">
                    <a class="link" href="/lifecycle/">Request Lifecycle</a>
                </li>
                <li class="menu-item">
                    <a class="link" href="/components/">Components</a>
                </li>
                <li class="menu-item">
                    <a class="link" href="/controllers/">Controller</a>
                    <ul class="submenu">
                        <li class="menu-item">
                            <a class="link" href="/controllers/uri-creation/">URI Creation</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="/controllers/http-message/">HTTP Message</a>
                        </li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a class="link" href="/annotations/">Annotations</a>
                    <ul class="submenu">
                        <li class="menu-item"><a class="link" href="#path">@path</a>
                        </li>
                        <li class="menu-item"><a class="link" href="#summary">@summary</a>
                        </li>
                        <li class="menu-item"><a class="link" href="#description">@description</a>
                        </li>
                        <li class="menu-item"><a class="link" href="#model">@model</a>
                        </li>
                        <li class="menu-item"><a class="link" href="#deprecated">@deprecated</a>
                        </li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a class="link" href="/factories-and-models/">Factories and Models</a>
                    <ul class="submenu">
                        <li class="menu-item">
                            <a class="link" href="/factories-and-models/factory-prototype/">Factory prototype</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="/factories-and-models/model-prototype/">Model prototype</a>
                        </li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a class="link active" href="/properties/">Properties</a>
                    <ul class="submenu">
                        <li class="menu-item">
                            <a class="link" href="#number">.number()</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="#string">.string()</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="#object">.object()</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="#date">.date()</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="#enum">.enum()</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="#set">.set()</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="#model">.model()</a>
                        </li>
                        <li class="menu-item">
                            <a class="link" href="#id-uuid">.id(), .uuid()</a>
                        </li>
                    </ul>
                </li>
                <li class="menu-item">
                    <a class="link" href="/repositories/">Repositories</a>
                </li>
                <li class="menu-item">
                    <a class="link" href="/interceptors/">Interceptors</a>
                </li>
                <li class="menu-item">
                    <a class="link" href="/configurations/">Configurations</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="markdown-body"><h1>Properties</h1>
<p>Properties is a way how you define validation rules and extra feature
to Model’s fields. By default Dominion framework comes with the most
common data types and validation rules. But you can extend them
with project specific functionality.</p>
<p><strong>Validation rules</strong> applies every time you are assigning a value to
Model’s property. For example:</p>
<pre class="hljs"><button data-clipboard-target="#_lbo" title="Copy to clipboard"><svg viewBox="-40 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m271 512h-191c-44.113281 0-80-35.886719-80-80v-271c0-44.113281 35.886719-80 80-80h191c44.113281 0 80 35.886719 80 80v271c0 44.113281-35.886719 80-80 80zm-191-391c-22.054688 0-40 17.945312-40 40v271c0 22.054688 17.945312 40 40 40h191c22.054688 0 40-17.945312 40-40v-271c0-22.054688-17.945312-40-40-40zm351 261v-302c0-44.113281-35.886719-80-80-80h-222c-11.046875 0-20 8.953125-20 20s8.953125 20 20 20h222c22.054688 0 40 17.945312 40 40v302c0 11.046875 8.953125 20 20 20s20-8.953125 20-20zm0 0"/></svg></button><code class="highlight" id="_lbo"><span class="hljs-comment">// model's properties declaration:</span>
properties: {
   <span class="hljs-attr">id</span>: Property.number().integer()
}

<span class="hljs-comment">// value assigment:</span>
ModelsFactory.new({<span class="hljs-attr">id</span>: <span class="hljs-string">'stringValue'</span>});
model.populate({<span class="hljs-attr">id</span>: <span class="hljs-string">'stringValue'</span>});
model.id = <span class="hljs-string">'stringValue'</span>;

<span class="hljs-comment">// All three rows above will throw an exception:</span>
<span class="hljs-comment">// Error: In Hello model property id should be a number, given 'stringValue'.</span>
</code></pre>
<p>If during assigment validation passed successfully, <strong>input modifications</strong>
will be applied. The most simple example of input modification is in
<code>.date()</code> property: if value is ISO 8601 string representation of a date
it will be automatically converted to JavaScript <code>Date</code> type.</p>
<p><strong>Output modification</strong> are taking action before sending models back
to a requester. They allow to change value of a property in JSON
response or remove it all. For example, you probably wouldn’t want
to send password hash to a client, setting property to <code>.private()</code>
will remove this field from the output.</p>
<p>Every property has default prototype that contains features that
are common for all variable types, e.g. <code>.primaryKey()</code> or <code>.private()</code>
make sense no matter if it is a String or Date.</p>
<h2>Property Default Prototype</h2>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.required()</code></td>
<td style="text-align:left">Marks that property value can not be set to <code>null</code> or <code>undefined</code>. Also it cannot be omitted before saving model to external storage.</td>
</tr>
<tr>
<td style="text-align:left"><code>.private()</code></td>
<td style="text-align:left">Marks that property should be removed from model before sending it in response.</td>
</tr>
<tr>
<td style="text-align:left"><code>.primaryKey()</code></td>
<td style="text-align:left">Marks property as primary key of the model. This property will be set to a value returned from external storage (e.g. database) after new record has been inserted.</td>
</tr>
<tr>
<td style="text-align:left"><code>.example(string)</code></td>
<td style="text-align:left">Adding example of property value, e.g. “978-3-16-148410-0” for ISBN. It is used only during generating OpenAPI (Swagger) documentation. It is also useful as inline documentation.</td>
</tr>
</tbody>
</table>
<h2>Number Property <a name="number"></a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.number()</code></td>
<td style="text-align:left">Marks that property should be a number. Setting this allows to use other methods in this table.</td>
</tr>
<tr>
<td style="text-align:left"><code>.integer()</code></td>
<td style="text-align:left">Marks that property should be an integer.</td>
</tr>
<tr>
<td style="text-align:left"><code>.min(number)</code></td>
<td style="text-align:left">Marks that properties value should be equal or bigger than <code>number</code>.</td>
</tr>
<tr>
<td style="text-align:left"><code>.max(numver)</code></td>
<td style="text-align:left">Marks that properties value should be equal or smaller than <code>number</code>.</td>
</tr>
</tbody>
</table>
<h2>String Property <a name="string"></a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.string()</code></td>
<td style="text-align:left">Marks that property should be a string. Setting this allows to use other methods in this table.</td>
</tr>
<tr>
<td style="text-align:left"><code>.min(number)</code></td>
<td style="text-align:left">Marks that length of properties value should be equal or bigger than <code>number</code>.</td>
</tr>
<tr>
<td style="text-align:left"><code>.max(number)</code></td>
<td style="text-align:left">Marks that length of properties value should be equal or smaller than <code>number</code>.</td>
</tr>
<tr>
<td style="text-align:left"><code>.pattern(regexp)</code></td>
<td style="text-align:left">Marks that properties value should match regular expression <code>regexp</code>.</td>
</tr>
</tbody>
</table>
<h2>Object Property <a name="object"></a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.object()</code></td>
<td style="text-align:left">Marks that property should be an object. Setting this allows to use other methods in this table.</td>
</tr>
<tr>
<td style="text-align:left"><code>.withProperties(array)</code></td>
<td style="text-align:left">Marks that object assigned to a property should contain all properties passed in <code>array</code>.</td>
</tr>
</tbody>
</table>
<h2>Date Property <a name="date"></a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.date()</code></td>
<td style="text-align:left">Marks that property should be a date. It also adds input modification that converts assigning value to javascript <code>Date</code> object.</td>
</tr>
</tbody>
</table>
<p>There are couple additional rules used during date conversion, if property assigned with:</p>
<ul>
<li><code>Date</code> object - it will be set unchanged.</li>
<li>integer - it will be treated as UNIX epoch time.</li>
<li>ISO 8601 string without timezone - UTC±00:00 timezone will be used</li>
<li>any other string - it will be parsed with native <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/parse"><code>Date.parse()</code></a></li>
</ul>
<h2>Enum Property <a name="enum"></a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.enum(array)</code></td>
<td style="text-align:left">Marks that properties value should one of values passed in <code>array</code>.</td>
</tr>
</tbody>
</table>
<h2>Set Property <a name="set"></a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.set(array)</code></td>
<td style="text-align:left">Marks that property should be an array and all elements in that array should be present in passed <code>array</code>.</td>
</tr>
</tbody>
</table>
<h2>Model Property <a name="model"></a></h2>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.model(modelName)</code></td>
<td style="text-align:left">Marks that property should be a reference to a model named <code>modelName</code>.</td>
</tr>
</tbody>
</table>
<p>Setting property to a <code>model()</code> will perform following:</p>
<ul>
<li>Validate if model <code>modelName</code> exists in a project.</li>
<li>Validate if assigning value is either (i) Model instance, (ii) Model reference or (iii) value of model’s primary key (integer and string applies).</li>
<li>Apply input modification that will convert assigned Model instance or Model reference to a value of model’s primary key.</li>
<li>Apply output modification converting Model instance into Model reference.</li>
</ul>
<p><em>Model reference</em> is an object containing model’s primary key,
name of a model and URI of that model. Note, you have to implement
endpoint that returns model by this URI in your project. For example:</p>
<pre class="hljs"><button data-clipboard-target="#_1min" title="Copy to clipboard"><svg viewBox="-40 0 512 512" xmlns="http://www.w3.org/2000/svg"><path d="m271 512h-191c-44.113281 0-80-35.886719-80-80v-271c0-44.113281 35.886719-80 80-80h191c44.113281 0 80 35.886719 80 80v271c0 44.113281-35.886719 80-80 80zm-191-391c-22.054688 0-40 17.945312-40 40v271c0 22.054688 17.945312 40 40 40h191c22.054688 0 40-17.945312 40-40v-271c0-22.054688-17.945312-40-40-40zm351 261v-302c0-44.113281-35.886719-80-80-80h-222c-11.046875 0-20 8.953125-20 20s8.953125 20 20 20h222c22.054688 0 40 17.945312 40 40v302c0 11.046875 8.953125 20 20 20s20-8.953125 20-20zm0 0"/></svg></button><code class="highlight" id="_1min">{
    <span class="hljs-attr">id</span>: <span class="hljs-number">42</span>,
    <span class="hljs-attr">model</span>: <span class="hljs-string">"Books"</span>,
    <span class="hljs-attr">link</span>: <span class="hljs-string">"/api/v2/books/42"</span>
}
</code></pre>
<h2>.id() and .uuid() <a name="id-uuid"></a></h2>
<p>As primary keys are present in majority of models you use in your
project, Dominion framework has shortcuts for you.</p>
<table>
<thead>
<tr>
<th style="text-align:left">Method</th>
<th style="text-align:left">Shortcut for</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>.id()</code></td>
<td style="text-align:left">.number().integer().min(1).primaryKey()</td>
</tr>
<tr>
<td style="text-align:left"><code>.uuid()</code></td>
<td style="text-align:left">.string().pattern(/^[ uuid-regexp ]$/).primaryKey()</td>
</tr>
</tbody>
</table>
</div>
</div>
</body>
</html>
